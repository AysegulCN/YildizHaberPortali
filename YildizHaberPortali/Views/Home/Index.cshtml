@model YildizHaberPortali.Models.HomeViewModel
@{
    ViewData["Title"] = "Ana Sayfa";
}

<style>
    /* Premium Slider Tasarımı */
    .slider-container {
        position: relative;
        padding: 40px 80px;
        background: #fdfdfd;
        border-radius: 30px;
        margin-top: 20px;
    }

    .carousel-item img {
        height: 500px;
        object-fit: cover;
        border-radius: 25px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }

    .carousel-control-prev {
        left: -60px;
        width: 60px;
        opacity: 1;
    }

    .carousel-control-next {
        right: -60px;
        width: 60px;
        opacity: 1;
    }

    .carousel-control-prev-icon, .carousel-control-next-icon {
        background-color: #4e73df;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-size: 50%;
        border: 4px solid #fff;
        box-shadow: 0 5px 15px rgba(78,115,223,0.3);
    }

    .carousel-caption {
        background: linear-gradient(transparent, rgba(0,0,0,0.8));
        width: 100%;
        left: 0;
        bottom: 0;
        padding: 40px 20px;
        border-radius: 0 0 25px 25px;
        text-align: left;
    }
</style>

<div class="container">
    <div class="slider-container shadow-sm">
        <div id="newsSlider" class="carousel slide carousel-fade" data-ride="carousel">
            <div class="carousel-inner">
                @{
                    var first = true;
                }
                @* 1. KISIM: Slider haberlerini döngüye alıyoruz *@
                @foreach (var item in Model.SliderNews.Where(x => x.IsPublished).Take(5))
                {
                    <div class="carousel-item @(first ? "active" : "")">
                        <a asp-controller="News" asp-action="Details" asp-route-id="@item.Id">
                            <img src="~/uploads/@item.Image" class="d-block w-100" alt="@item.Title">
                            <div class="carousel-caption">
                                <span class="badge badge-primary mb-2 shadow-sm">@item.Category?.Name</span>
                                <h2 class="text-white">@item.Title</h2>
                            </div>
                        </a>
                    </div>
                    first = false;
                }
            </div>
            <a class="carousel-control-prev" href="#newsSlider" role="button" data-slide="prev"><span class="carousel-control-prev-icon"></span></a>
            <a class="carousel-control-next" href="#newsSlider" role="button" data-slide="next"><span class="carousel-control-next-icon"></span></a>
        </div>
    </div>

    <div class="mt-5 mb-4">
        <h3 class="font-weight-bold"><i class="fas fa-fire text-danger mr-2"></i>Son Haberler</h3>
        <hr />
    </div>

    <div class="row">
        @* KRİTİK DÜZELTME: Model.News yerine Model.LatestNews deniyoruz *@
        @foreach (var item in Model.LatestNews.Take(12))
        {
            <div class="col-md-4 mb-4">
                <div class="card border-0 shadow-sm" style="border-radius: 15px; overflow: hidden;">
                    <img src="~/uploads/@item.Image" class="card-img-top" style="height: 200px; object-fit: cover;">
                    <div class="card-body">
                        <h5 class="card-title font-weight-bold">@item.Title</h5>
                        <a asp-controller="News" asp-action="Details" asp-route-id="@item.Id" class="btn btn-outline-primary btn-sm rounded-pill">Devamını Oku</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>